@using System.Security.Policy
@using APIInterface.Models.ResponseModels

@{
    ViewBag.Title = "SelectCar";
    Layout = null;
    var vehicleSlideCounter = 0;
}

<!DOCTYPE html>
<html lang="@APIInterface.Helper.CultureHelper.GetCurrentNeutralCulture()" >
<head prefix="og: http://ogp.me/ns#">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Car Rental Solution,TajeerCare,Car Rental,Taxi Rental, Rental Software, Rent a Car, Cares,Innostark, Online Booking, Rental Agreements,Non-Revenue Ticket, Vehilce" />
    <meta name="google-site-verification" content="RusK92KlbFzEJFU3kDh4Jy1t5cMaLJZ97Z6El2W5hYs" />
    <meta property="og:title" content="Tajeer Cares Rental Solution" />
    <meta property="og:description" content="Car Rental Solution for rental business">
    <meta property="og:image" content="~/assets/Images/Tajeer_Car_Rental_1.jpg"><!-- link to image for socio -->
    <meta content="Car Rental Solution for Rental Agents and Companies" name="description">
    <meta content="Car Rental Solution,tajeercare,car rental,taxi rental" name="keywords">


    <title>@Session["siteName"] | @APIInterface.Resources.SelectCarResource.SelectTheCar</title>
    <link rel="shortcut icon" type="image/x-icon" href="~/Images/images/favicon.ico" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="~/Content/css/jquery-ui.css" type="text/css" media="all" />
    <link rel="stylesheet" href="~/Content/css/style.css" type="text/css" media="all" />
    <link rel="stylesheet" href="~/Content/css/jquery.slider.min.css" />
    <link href="~/Content/css/jquery-Slider.css" rel="stylesheet" />
    <link href="~/Content/IstStyleSheet.css" rel="stylesheet" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/1.4.5/numeral.min.js"></script>
</head>
<body class="page page-two-column">
    <div id="conteiner">
        <div id="branding">
            <div id="branding-content">
                <div class="title-content">
                    <a title=""><img style="width: 128px" class="site-logo" src="@Session["CompanyLogo"]" alt="" /></a>
                    <h1 style=" width: 200%;margin-left: 65px" class="site-title"><a title="">@Session["siteName"]</a></h1>
                </div>
                <div class="access-content">

                </div><!-- .access -->
                <div class="menus-content">
                    <div class="menus">
                        <div class="language">
                            @if (APIInterface.Helper.CultureHelper.GetCurrentNeutralCulture() == "en")
                            {
                                <a class="lang" id="en" href="#" style="font-weight: 700; color: red; margin-left: 198px;">English</a>
                                <a class="lang" id="ar" href="#" style="margin-left: 12px; color: #000000;">عربي</a>
                            }
                            else
                            {
                                <a class="lang" id="en" href="#" style="margin-left: 198px; color: #000000;">English</a>
                                <a class="lang" id="ar" href="#" style="margin-left: 12px; font-weight: 700; color: red;">عربي</a>
                            }
                        </div>
                    </div>
                </div>
            </div><!-- #branding-content -->
            <div class="clear"></div>
        </div><!-- #branding -->
        <div id="progress-bar">
            <div id="progress-bar-steps">
                <a id="startingForm" class="progress-bar-step done" href='@Url.Action("Index", Session["CompanyShortName"] + "/Rental/Index")'>
                    <div class="step_number">1</div>
                    <div class="step_name">@APIInterface.Resources.SelectCarResource.Createrequest</div>
                </a>
                <div class="progress-bar-step current">
                    <div class="step_number">2</div>
                    <div class="step_name">@APIInterface.Resources.SelectCarResource.Choosecar</div>
                </div>
                <div class="progress-bar-step">
                    <div class="step_number">3</div>
                    <div class="step_name">@APIInterface.Resources.SelectCarResource.Chooseextras</div>
                </div>
                <div class="progress-bar-step last">
                    <div class="step_number">4</div>
                    <div class="step_name">@APIInterface.Resources.SelectCarResource.ReviewBook</div>
                </div>
            </div>
            <div class="clear"></div>
        </div>
        <div id="main">

            <form class="main-form">
                <div>
                    <div id="book_car" class="title-form current">
                    </div>
                    <div id="book_car_content" class="content-form ">

                        <div class="location-block">
                            <div class="form-block location">@APIInterface.Resources.RentalResource.PickUpLocation</div>
                            <input class="location" disabled type="text" value='@Session["pickupName"]' placeholder="Enter airport, city or zip code" name="location" />
                            <a href='@Url.Action("Index", Session["CompanyShortName"] + "/Rental/Index")'> @APIInterface.Resources.SelectCarResource.UpdateReservationDateTime</a>
                        </div>
                        <div class="form-block pick-up" style=" margin-left: 18px; width: 172px;">
                            <h4>@APIInterface.Resources.RentalResource.PickUpDate</h4>
                            <input class="datepicker" disabled type="text" style="margin-bottom: 12px; width: 70%" name="data_from" value='@Session["pickupDate"]' />
                            <span id="bookingDuration" style="color: #EF7C37;"><span style="font-weight: 800;">Duration:</span> @Session["period"] </span>
                        </div>
                        <div class="form-block drop-off" style=" margin-left: 8px;">
                            <h4 style=" height: 18px;">@APIInterface.Resources.RentalResource.DropoffLocation</h4>
                            <input class="location" style="    padding-top: 0px;height: 41px;" disabled type="text" value='@Session["dropoffName"]' placeholder="Enter airport, city or zip code" name="return_location" />
                        </div>
                        <div class="form-block drop-off" style=" margin-left: 29px; width: 171px;">
                            <h4>@APIInterface.Resources.RentalResource.DropoffDate</h4>
                            <input disabled class="datepicker" type="text" style="width: 70%" value='@Session["dropoffDate"]' name="data_to" value="" />
                        </div>
                    </div>
                </div>
            </form>
            <div id="primary">

                <div id="content">
                    <div class="widget main-widget product-widget">
                        <div class="content-overlay">
                            <img class="ajax-loader" src="~/Images/images/ajax-loader.gif" alt="" />
                        </div>
                        <form>

                            <div id="vehicleSelectorContainer" class="row">
                                @foreach (WebApiParentHireGroupsApiResponse x in ViewBag.HGDetail)
                                {
                                    ++vehicleSlideCounter;
                                    <div id="vehicleSlider_@x.HireGroupId" class="vehicleSlider_@vehicleSlideCounter" style="display: none">
                                        <!-- Vehicle Images Section On Slider -->
                                        <div class="bg-top"></div>
                                        <section class="taxi vehicle-slide js-vehicle-slide active">
                                            <div class="sunrise-box">
                                                <h4>@x.SubTitle</h4>
                                                <p class="sunrise">@x.Title</p>
                                            </div>
                                            <div class="vehicle-info">
                                                <p class="vehicle-img js-preload" style="background: transparent url(@x.PhotoUrl) no-repeat center top">@x.Title</p>
                                                <div class="copy">
                                                    <p>
                                                        @x.Description
                                                    </p>
                                                </div>
                                                <div>
                                                    <button id="showClassBtn" class="@(x.SubHireGroups.Count == 0 ? "disabled" : "blue_button")">
                                                        @APIInterface.Resources.SelectCarResource.ViewCars <span class="badge">@x.SubHireGroups.Count</span>
                                                    </button>
                                                </div>
                                                <div style="display: none">
                                                    <img class="car" alt="" src="@x.PhotoUrl" />
                                                </div>
                                            </div>
                                        </section>
                                    </div>
                                }
                            </div>
                            <div id="vehicleDetailContainer" class="post" style="display: none">
                                <div class="main-block_container" style="margin-left: 5px; width: 99%; margin-top: 1px; margin-bottom: 5px; ">

                                    <div id="accordion">
                                        @if (ViewBag.HGDetail != null)
                                        {
                                            int i = 0;
                                            foreach (var item in ViewBag.HGDetail)
                                            {
                                                <h3 title="@item.Description" id=@(+item.HireGroupId) style="display: none">
                                                    <span style=""> @item.HireGroupName &nbsp; @item.ChildHireGroupCount</span><span style="float: right; margin-right: 3px;">
                                                        @if (@item.DropoffCharge != 0)
                                                        {
                                                            <text> <b>Drop-off-Charges</b> : @item.DropoffCharge</text>
                                                        }
                                                    </span>
                                                </h3>
                                                <div class="container-fluid" id="container_@(item.HireGroupId)" style="display: none">
                                                    <!-- If Needed Left and Right Padding in 'md' and 'lg' screen means use container class -->
                                                    @if (item.SubHireGroups.Count != 0)
                                                    {
                                                        int count = 0;
                                                        foreach (var obj in item.SubHireGroups)
                                                        {

                                                            <div class='row' style='margin-top:10px; padding: 12px; background-color: @(count % 2 == 0 ? "rgba(170, 175, 170, 0.25);" : "rgba(112, 172, 238, 0.35);") ;'>
                                                                <div class="col-sm-4 col-lg-4" style="width: 37%; float: left;">
                                                                    <div class="product-img">
                                                                        <img src="@obj.ImageUrl" style="height: 130px; width: 290px;" title="Vehicle photo" />
                                                                    </div>

                                                                </div>
                                                                <div class="col-sm-4 col-lg-4" style="width: 30%; float: left;">
                                                                    <div class="product-info">
                                                                        <h3 class="entry-format" title="">  <span title="Hire Group">@item.HireGroupName</span> | <span title="Vehicle Categoty"> @obj.VehicleCategory</span></h3>
                                                                        <div class="features" style="margin-bottom: 12px; width: 265px;">
                                                                            <p title="@APIInterface.Resources.SelectCarResource.VehicleMaker" style="width: 49%; display: inline-block;"><img src="~/Images/images/vehicleMaker.png" alt="" style="    height: 20px; width: 20px;" /><span>@obj.VehicleMake</span></p>
                                                                            <p title="@APIInterface.Resources.SelectCarResource.NoofPassengers" style="width: 45%; display: inline-block;"><img src="~/Images/Passengers.png" alt="" style="    height: 20px; width: 23px;" /><span>@obj.NoOfPassengers</span></p>
                                                                            <p title="@APIInterface.Resources.SelectCarResource.VehicleModel" style="width: 49%; display: inline-block;"><img style="    height: 18px; width: 18px;" src="~/Images/images/vehicleModel.png" alt="" /><span>@obj.VehicleModel</span> </p>
                                                                            <p title="@APIInterface.Resources.SelectCarResource.NoofSuitcases" style="width: 45%; display: inline-block;"><img src="~/Images/Suitcase.png" alt="" style="    height: 20px; width: 23px;" /><span>@obj.TrunckCapacity</span></p>
                                                                            <p title="@APIInterface.Resources.SelectCarResource.VehicleModelYear" style="width: 49%; display: inline-block;"><img style="    height: 18px; width: 18px;" src="~/Images/images/vehicelModelYear.png" alt="" /><span>@obj.ModelYear</span> </p>
                                                                            <p title="@APIInterface.Resources.SelectCarResource.NoofDoors" style="width: 45%; display: inline-block;"><img src="~/Images/car-doors.png" alt="" style="    height: 20px; width: 23px;" /><span>@obj.NoOfDoors</span></p>
                                                                        </div>

                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-4 col-lg-4" style="width: 33%; float: left;">
                                                                    <input type="button" class="backtoVehicleSliderBtn blue_button" value="@APIInterface.Resources.SelectCarResource.Back" />
                                                                    <input title="Get Standard Rate" type="button" name="SelectBtn" id=@("chargeId_" + obj.HireGroupDetailId) class="blue_button Charge" style=" margin-top: 17px; float: left; color: white; width: 49%; margin-left: 5px;" value="@APIInterface.Resources.SelectCarResource.GetCharge" />
                                                                    <input title="Select Vehicle" id=@("selectId_"+obj.HireGroupDetailId) type="button" name="SelectBtn" class="continue_button blue_button Select" hidden="" style=" margin-top: 17px; margin-bottom: 10px; padding-top: 3px; font-weight: inherit; float: left; color: white; width: 49%; margin-left: 5px;" value="@APIInterface.Resources.SelectCarResource.BookNow" />
                                                                    <div class="product-info" style="    margin-left: -28px; font-size: 27px;margin-top: 70px;">
                                                                        <span style="margin-left: -4px; font-size: 23px;" id=@("TotalC_" + obj.HireGroupDetailId)> </span>
                                                                        <span style="font-size: 12px;" id=@("perdaycost_" + obj.HireGroupDetailId)></span>
                                                                    </div>
                                                                    <p title="@APIInterface.Resources.SelectCarResource.NoofAirbag" style="width: 45%; display: inline-block;"><img src="~/Images/Airbag.png" alt="" style="    height: 20px; width: 23px;" /><span style="margin-left: 7px;">@obj.NoOfAirBags</span></p>
                                                                </div>
                                                                <div class="col-sm-4 col-lg-4" style="font-family: inherit; margin-top: 9px;  font-style: italic;">
                                                                    <p style=" clear: both;">
                                                                        @obj.ImageDescription
                                                                        @if (item.SubHireGroups.Count != (count + 1))
                                                                        {
                                                                            //  <hr style="margin-bottom: 14px;" />
                                                                        }
                                                                    </p>
                                                                </div>
                                                            </div>
                                                                        count++;
                                                        }
                                                        <!-- HG Det Loop-->
                                                    }
                                                    else
                                                    {
                                                        <center>
                                                            <img src="~/Images/soldout.png" style=" height: 72px;" />
                                                            <input type="button" class="backtoVehicleSliderBtn blue_button" value="Back" style="width: 17%" />
                                                        </center>
                                                    }
                                                </div>
                                            } <!-- HG Loop-->
                                        } <!-- HG Null-->

                                    </div>

                                </div>
                            </div>
                            <!-- Vehicle Images Section On Slider-->
                            <div id="vehicleSelectorSliderContainer" class="row" style="margin-top: 30px;">
                                <div class="col-sm-12 form-horizontal">
                                    <div id="orderStatusSliderContainer" class="col-sm-12 form-horizontal">
                                        <div id="statusSliderSubContainer">
                                            <center>
                                                <div id="circles-slider" class="slider" style="background-color: black"></div>
                                            </center>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="clear"></div>
            </div>
        </div>
        <div class="clear"></div>
        <footer id="footer"></footer><!--end:footer-->
    </div><!--end:conteiner-->

    <script type="text/javascript" src="~/Scripts/js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="~/Scripts/js/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="~/Scripts/js/jquery-ui.js"></script>
    <!--[if IE]>
    <script type="text/javascript" src="~/Scripts/js/placeholder_ie.js"></script>
    <![endif]-->
    <script type="text/javascript" src="~/Scripts/js/jquery.slider.min.js"></script>
    <script type="text/javascript" src="~/Scripts/js/jquery.meio.mask.js"></script>
    <script type="text/javascript" src="~/Scripts/js/custom-form-elements.js"></script>
    <script type="text/javascript" src="~/Scripts/js/jquery.selectbox-0.2.min.js"></script>
    <script type="text/javascript" src="~/Scripts/js/script.js"></script>
    <script src="~/Scripts/_jquery.blockUI.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="~/Scripts/jquery.pulsate.min.js"></script>
    <script src="~/Scripts/jquerySlider.js"></script>
    <script src="~/Scripts/ISTUtility.js"></script>  <!--Baqer added this-->
    <script>

        $(document).ready(function () {
            
            $(".lang").click(function () {
                var lang = $(this).attr('id');
                window.location.href = "../../Rental/ChangeCulture?lang="+lang;
            });

            $("#bookingDuration").pulsate({
                color: "#EF7C37",
                reach: 50,
                repeat: 5,
                speed: 800,
                glow: true
            });
            accordionSetting(true); // Should not be collapsible
            setVehicleSlider();
            setTimeout(
            function()
            {
                callScroll();
            }, 2000);
            function callScroll() {
                $('html, body').animate({
                    scrollTop: $("#vehicleSelectorContainer").offset().top + 100
                }, 1000);
                return false;
            }


            // scroll to car selection div

            $("#showClassBtn").live("click", function(e) {
                $("#vehicleSelectorContainer").hide("slide", {}, 500);
                $("#vehicleSelectorSliderContainer").hide();
                var activeHireGroupId = parseInt($(".activeVehicle")[0].id.split("_")[1]);
                if ($(".activeHireGroupDetail") && $(".activeHireGroupDetail").length > 0) {
                    $(".activeHireGroupDetail").hide();
                    $(".activeHireGroupDetail").removeClass('activeHireGroupDetail');
                }
                $("#" + activeHireGroupId).addClass("activeHireGroupDetail");
                $("#" + activeHireGroupId).show();
                $("#container_" + activeHireGroupId).addClass("activeHireGroupDetail");
                $("#vehicleDetailContainer").show("slide", {}, 500);
                setTimeout(function() {
                    $("#container_" + activeHireGroupId).show("slide", {}, 500);
                }, 1000);
                return false;
            });

            $(".backtoVehicleSliderBtn").live("click", function(e) {
                var activeHireGroupId = parseInt($(".activeVehicle")[0].id.split("_")[1]);
                $("#container_" + activeHireGroupId).hide("slide", {}, 500);
                setTimeout(function() {
                    $("#vehicleDetailContainer").hide("slide", {}, 500);
                    $("#vehicleSelectorContainer").show("slide", {}, 500);
                    $("#vehicleSelectorSliderContainer").show();
                    callScroll();
                }, 1000);
                return false;
            });
        });

        setVehicleSlider = function() {
            $(function() {
                // set up an array to hold the order Status
                var orderStatusArray = @Html.Raw(Json.Encode(
                    ((List<WebApiParentHireGroupsApiResponse>)ViewBag.HGDetail).Select(hg => hg.HireGroupName)
                ));

                $(".slider")

                    // activate the slider with options
                    .slider({
                        min: 0,
                        max: orderStatusArray.length - 1,
                        value: 0
                    })

                    // add pips with the labels set to "months"
                    .slider("pips", {
                        rest: "label",
                        labels: orderStatusArray
                    })

                    // and whenever the slider changes, lets echo out the month
                    .on("slidechange", function(e, ui) {
                        // Get active vehicle and hide it
                        var active = $(".activeVehicle");
                        if (active) {
                            active.removeClass("activeVehicle");
                            active.hide();
                        }
                        var currentVehicle = $(".vehicleSlider_" + (++ui.value));
                        if (currentVehicle[0] != null && currentVehicle[0] != undefined) {
                            currentVehicle.show();
                            currentVehicle.addClass("activeVehicle");
                            if ($(".ui-slider-handle")[0] != null && $(".ui-slider-handle")[0] != undefined) {
                                if ($(".ui-slider-handle")[0].children != null && $(".ui-slider-handle")[0].children != undefined) {
                                    $(".ui-slider-handle").html("");
                                }
                                $(".ui-slider-handle")[0].appendChild(currentVehicle.find(".car").clone()[0]);
                            }
                        }
                    });

                // Show first vehicle visible
                if ($(".vehicleSlider_1")[0] != null && $(".vehicleSlider_1")[0] != undefined) {
                    $(".vehicleSlider_1").show();
                    $(".vehicleSlider_1").addClass("activeVehicle");
                    if ($(".ui-slider-handle")[0] != null && $(".ui-slider-handle")[0] != undefined) {
                        $(".ui-slider-handle")[0].appendChild($(".vehicleSlider_1").find(".car").clone()[0]);
                    }
                }

                // Set style
                $('#circles-slider').addClass('slider-bar js-slider-bar ui-corner-all');
            });
        };
    </script>
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-70262037-1', 'auto');
        ga('send', 'pageview');

    </script>
</body>
</html>
